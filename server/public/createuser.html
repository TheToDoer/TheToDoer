<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Create Users</title>
    <script src="js/superfetch2.js"></script>
    <link rel="stylesheet" href="css/style.css">
  </head>
  <body>

    <ul>
      <li><a href="showlist.html">To Do List</a></li>
      <li><a  href="createlist.html">Create/delete list</a></li>
      <li><a href="index.html">Login</a></li>
      <li><a class="active" href="createuser.html">Create User</a></li>
    </ul>


  <div class="login-page">
    <div class="form">
        <input id="inpLoginname" type="text" name="" value="" placeholder="Username" required/>
        <input id="inpPassword" type="password" name="" value="" placeholder="Password" required/>
        <input id="inpFullname" type="text" name="" value="" placeholder="Full Name" required/>
        <button id="btnCreate" type="button" name="button">Create User</button>
    </div>
  </div>


  </body>

  <script>

 var inpLoginname = document.getElementById("inpLoginname");
 var inpPassword = document.getElementById("inpPassword");
 var inpFullname = document.getElementById("inpFullname");
 var btnCreate = document.getElementById("btnCreate");

//button click ---------------------------------
btnCreate.onclick = function() {

    var upload = JSON.stringify({
        loginname: inpLoginname.value,
        password: inpPassword.value,
        fullname: inpFullname.value
    });

    var url = "https://todoertest2.herokuapp.com/thetodoer/users/";

    var cfg = {
        method: "POST",
        body: upload
    }

    superfetch(url, "json", succ, error, cfg);
}

//success --------------------------------------
function succ(data) {

    //save logindata/token to localStorage
    localStorage.setItem("logindata", JSON.stringify(data));
    console.log("it worked!");
}

//error ----------------------------------------
function error(err) {
    console.log(err);
}


  </script>
</html>
